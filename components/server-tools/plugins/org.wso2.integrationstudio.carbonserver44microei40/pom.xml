<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <parent>
        <artifactId>wso2-integrationstudio-server-plugins</artifactId>
        <groupId>org.wso2.integrationstudio</groupId>
        <version>8.0.0-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>
    <artifactId>org.wso2.integrationstudio.carbonserver44microei40</artifactId>
    <packaging>eclipse-plugin</packaging>
    <name>Integration Studio Enterprise Integrator (Carbon 4.4 based)</name>
    <build>
	<plugins>
		<plugin>
			<groupId>com.googlecode.maven-download-plugin</groupId>
			<artifactId>download-maven-plugin</artifactId>
			<version>${maven.download.plugin}</version>
			<executions>
				<execution>
					<id>download-mi-runtime</id>
					<phase>initialize</phase>
					<goals>
						<goal>wget</goal>
					</goals>
					<configuration>
						<url>https://github.com/wso2/micro-integrator/releases/download/v4.0.0-rc1/wso2mi-${mi.product.version}.zip</url>
						<unpack>false</unpack>
						<outputDirectory>${project.basedir}/resources/server/</outputDirectory>
					</configuration>
				</execution>
			</executions>
		</plugin>
		<plugin>
			<artifactId>exec-maven-plugin</artifactId>
			<groupId>org.codehaus.mojo</groupId>
			<version>${org.codehaus.mojo.exec.maven.plugin}</version>
			<executions>
				<execution>
					<id>change-mi-deployment-toml</id>
					<phase>initialize</phase>
					<goals>
						<goal>exec</goal>
					</goals>
					<configuration>
						<commandlineArgs>${mi.product.version}</commandlineArgs>
						<executable>${project.basedir}/resources/scripts/configure-mi-script.sh</executable>
					</configuration>
				</execution>
			</executions>
		</plugin>
	</plugins>
</build>
</project>
